# Vulnerability
`Vulnerability`: weakness in an organisation’s assets that when exploited by a threat will lead to economic loss“脆弱性”:组织资产的弱点，一旦被威胁利用，将导致经济损失
Controls:
![alt text](<Screenshot 2024-06-02 at 16.24.32.png>)
In cybersecurity terms, a vulnerability is:
> A weakness in an information system, system security procedures, internal controls or implementation that could be exploited by a threat source.信息系统、系统安全程序、内部控制或实施中可能被威胁来源利用的弱点
- ISO27005 Information Security Risk Management in the following areas:- ISO27005信息安全风险管理:
   - Organization
   - Processes and procedures
   - Management routines
   - Personnel
   - Physical environment
   - **Information system configuration**
   - **Hardware, software or communications equipment Dependence on external partie**
   - 组织过程和程序管理惯例人员物理环境信息系统配置硬件、软件或通信设备对外部的依赖性

### Vulnerability Reporting
- When a vulnerability is discovered, it is usually reported to the organisation responsible for the product and they are given time to fix当发现漏洞时，通常会向负责产品的组织报告，并给予他们时间进行修复
- Zero Day vulnerability is one that is unknown (or unfixed) by the manufacturer of the product when it is exploited零日漏洞是指产品制造商在被利用时未知(或未修复)的漏洞
- Vulnerabilities that are reported and then fixed, by a patch or upgrade of the software or product, is then reported for inclusion in public databases:报告并通过软件或产品的补丁或升级修复的漏洞，然后报告以包含在公共数据库中:
   - CVE Common Vulnerabilities and Exposures (https://cve.mitre.org/index.html)
   - NVD National Vulnerability Database (https://nvd.nist.gov/)
   - VulDB (https://vuldb.com/)
- Disclosure comes with problems because it may help disseminate and promote exploits披露会带来问题，因为它可能有助于传播和推广漏洞
- There is a market for bug finding (Bug Bounties) and also for selling Zero Days有bug查找市场(bug赏金)，也有出售零日的市场
### Vulnerability Scoring:漏洞评级
1. Vulnerability scoring measures (NVD):1. 漏洞评分措施(NVD):
    1. Attack vector: network, local, physical攻击媒介:网络，本地，物理
    2. Privileges required: None, low, high所需权限:无、低、高
    3. User interaction: None, required用户交互:无，必需
    4. Impact on CIA: None, low, high对CIA的影响:无，低，高
2. CWSS: more complex and based on 3 measures:CWSS:更复杂，基于3个衡量标准:
    1. Base Findings: captures the inherent risk of the weakness, confidence in the accuracy of the finding, and strength of controls.基本发现:捕获弱点的固有风险、对发现准确性的信心以及控制的强度。
    2. Attack Surface: the barriers that an attacker must overcome in order to exploit the weakness.攻击面:攻击者为了利用弱点必须克服的障碍
    3. Environmental: characteristics of the weakness that are specific to a particular environment or operational context环境:特定于特定环境或操作环境的弱点特征
### Vulnerability Sharing
A Computer Emergency Response Team (CERT) such as AusCERT will alert an organisation to a vulnerability.计算机应急响应小组(CERT)(如AusCERT)将提醒组织注意漏洞

### Attacks 1
- Vulnerabilities that directly involve networks and their protocols:-直接涉及网络及其协议的漏洞:
   - Network traffic is vulnerable to interception, being read and manipulated网络流量容易被拦截、读取和操纵
   - Network services are vulnerable to poor availability by being overloaded网络服务过载，可用性差
- Sniffing: listening to traffic on a wired or wireless network (WiFi, Bluetooth, NFC)-嗅探:监听有线或无线网络(WiFi，蓝牙，NFC)上的流量
   - May involve a “man-in-the-middle” attack可能涉及“中间人”攻击
   - Wireless can be passively sniffed because it is broadcast无线可以被动嗅探，因为它是广播
- Spoofing: altering communications to pretend to be a different sender-欺骗:改变通信，假装是不同的发送者
   - e.g. Caller ID on an SMS or phone call, senders of emails例如，短信或电话的来电显示，电子邮件的发送者
   - Usually done at the network level altering TCP/IP packets 通常在网络级别修改TCP/IP数据包
   - Part of a man-in-the-middle attack 中间人攻击的一部分
  
### Attacks 2
- Denial of service服务拒绝
   - Flooding a service with fake requests so that real users can not access the service用虚假请求淹没服务，使真实用户无法访问该服务
- Distributed Denial of Service (DDoS)分布式拒绝服务(DDoS)
   - Using many sources for denial of service attacks including Internet of Things (IoT) devices使用多种来源进行拒绝服务攻击，包括物联网(IoT)设备
- Man-in-the-middle attacks中间人攻击
   - Intercept network traffic to sniff the packets before passing them to the legitimate destination or to a destination under the attacker’s control对网络流量进行拦截，在报文到达合法目的地或攻击者控制的目的地之前对报文进行嗅探
- Hacking: Initial Access and Lateral Movement 黑客:初始访问和横向移动
   - Access a machine through the use of remote access services or through exploitation of vulnerabilities in a network service通过使用远程访问服务或利用网络服务中的漏洞访问机器
   - Use a machine to “pivot” to other machines on the same, or different networks使用一台机器“枢轴”到相同或不同网络上的其他机器

### OWASP Top 10 Web Vulnerabilities
Open Web Application Security project maintains a list of top 10 vulnerabilities:开放Web应用程序安全项目维护了十大漏洞列表:
- Programming errors程序错误
   - Authentication身份验证
   - Input sanitization: Injection, Cross-Site Scripting (XSS)输入处理:注入、跨站脚本(XSS)
   - Security and access安全和访问控制
- Configuration errors组态错误
   - Insufficient logging or monitoring记录或监视不足
   - Security configuration安全配置
- 3rd party programming errors第三方编程错误
   - Using components with known vulnerabilities使用具有已知漏洞的组件

### Finding Vulnerabilities: Scanning扫描
- Vulnerability scanning
    - Use tools that carry out an automated scan of the network and its services:使用工具对网络及其服务进行自动扫描:
        - nmap
        - OpenVAS
        - BurpSuite
        - Nessus
    - These will look for vulnerabilities based on a database. They rely on being able to version software  discovered accurately to be able to check if there are known vulnerabilities. i.e. it doesn’t try and exploit vulnerabilities这些将查找基于数据库的漏洞。他们依赖于能够准确地对发现的软件进行版本化，从而能够检查是否存在已知的漏洞。也就是说，它不会试图利用漏洞

### Finding Vulnerabilities: Penetration Testing渗透测试
- Penetration Testing (Ethical Hacking)-渗透测试(道德黑客)
    - Professionals who use tools and their skills to look for vulnerabilities使用工具和技能寻找漏洞的专业人员
    - Will operate within an agreed scope regarding what they can and can’t do将在一个商定的范围内，关于他们能做什么和不能做什么
    - May be done as White Box, Grey Box or Black Box depending on how much information is provided about the network and the applications that are running on them可以作为白盒，灰盒或黑盒完成，这取决于提供了多少关于网络和在其上运行的应用程序的信息
- Red Teams
    - Teams of ethical hackers that will try and penetrate a network, sometimes adopting Tactics, Techniques and Procedures of known hacker groups有道德的黑客团队，他们会尝试渗透网络，有时会采用已知黑客组织的策略、技术和程序
    - They may operate against a Blue Team that tries to defend against the attack他们可能会对试图防御攻击的蓝队进行操作
    - The purpose again is to highlight vulnerabilities目的也是为了突出漏洞
    - Sometimes Blue and Red teams are combined to form Purple teams有时蓝队和红队会组合成紫队


## Computers
- Computers are built up using a secure baseline image: configuration of Windows (for example) that has default user, system and security settings, certain software profiles计算机是使用安全基线映像构建的:Windows配置(例如)具有默认用户，系统和安全设置，某些软件配置文件
- Can implement Australian Signals Directorate (ASD) Essential Eight:-能够执行澳大利亚信号局(ASD)基本八项:
    1. Application control: prevent the execution of unapproved/malicious programs应用程序控制:防止执行未经批准的/恶意程序
    2. Configure Microsoft Office macro settings2. 配置Microsoft Office宏设置
    3. Restrict administration privileges限制管理权限
    4. Multi-factor Authentication多因素认证
    5. Daily backups日常备份
    6. Patching applications修补应用程序
    7. Application hardening应用硬化
    8. Patch Operating Systems 补丁操作系统

. Application Control应用控制 
- Vulnerability
    - Windows has a variety of scripting languages that can be used for malicious purposesWindows有各种脚本语言，可用于恶意目的
    - They can be run from the command line applications cmd.exe, powershell.exe and applications such as Microsoft Office (Word, Excel, PowerPoint) which runs VBScript and JScript (a form of JavaScript)它们可以从命令行应用程序cmd.exe, powershell.exe和运行VBScript和JScript (JavaScript的一种形式)的Microsoft Office (Word, Excel, PowerPoint)等应用程序运行。
    - Although many attacks require a person to click on a link and allow a program or script to run, some do not need this.虽然许多攻击需要一个人点击链接，并允许一个程序或脚本运行，有些不需要这样做。
- Controls
    - General users should be prevented from running scripts in PowerShell and another scripting environment Windows Script Host (WSH)一般用户应避免在PowerShell和其他脚本环境中运行脚本Windows脚本主机(WSH)
    - Launching applications on Windows (anything with a file extension of .exe) can be checked against a AllowList and BlockList 在Windows上启动应用程序(任何文件扩展名为。exe)可以根据AllowList和BlockList进行检查

. Microsoft Office Macros微软Office宏
- Vulnerability
    - Office has the ability to automate actions by running a Macro which is a piece of script that is labelled and associated with a key combination or some action such as opening a documentOffice有能力通过运行宏来自动化操作，宏是一段标记并与组合键或某些操作(如打开文档)相关联的脚本
    - Malicious users can craft macros that steal information (C) or run malware (C,I, A)恶意用户可以制作窃取信息(C)或运行恶意软件(C,I, A)的宏
- Controls
    - Microsoft has made it harder to run macros because you need to agree to running them but that is not too hard with some users微软让运行宏变得更加困难，因为你需要同意运行它们，但这对一些用户来说并不难
    - Block macros in Office and train users阻断Office中的宏，培训用户

. Restrict Administration Privileges限制管理权限
- A user with administrator privileges can normally carry out all actions on a computer including installing programs and device drivers (software for printers, peripheral devices), managing user accounts, managing logging and auditing functions具有管理员权限的用户通常可以执行计算机上的所有操作，包括安装程序和设备驱动程序(打印机软件、外围设备)、管理用户帐户、管理日志记录和审计功能
- On Linux and Windows there are special users root and Administrator but on consumer products main user is usually an administrator as well在Linux和Windows上有特殊用户root和Administrator，但在消费产品上主用户通常也是管理员
- Windows will now make explicit when a user needs to use administrative privileges当用户需要使用管理权限时，Windows将会显示
- Vulnerability
    - Users are given administrator privileges when they don’t need these privileges for everyday use当用户在日常使用中不需要这些权限时，就会被授予管理员权限
    - Attackers who get access to these accounts then have increased access thanks to the privileges (C,I,A)-攻击者可以访问这些帐户，然后增加访问权限，这要归功于特权(C,I,A)
- Controls
    - Limit the number of users who have administrator rights—限制具有管理员权限的用户数量
    - Train users to use them judiciously训练用户明智地使用它们
    - Monitor actions of anyone who uses these privileges-监视任何使用这些特权的人的操作

. Multi-Factor Authentication多因素认证
- Normal authentication uses a single factor: a password (often referred to as “something you know” authentication type)普通身份验证使用单一因素:密码(通常称为“您知道的东西”身份验证类型)
- Factors sometimes defined as:因素有时被定义为
    - Type 1: Something you know
    - Type 2: Something you have
    - Type 3: Something you are or something you do
    - Somewhere you are
    - Context-Aware Authentication背景感知实体认证
- Vulnerability
    - Attacker obtains username and password and uses it to gain unauthorised access (C – possibly I, A)攻击者获得用户名和密码并使用它来获得未经授权的访问
- Controls
    - Multi-factor authentication makes it harder for attacker to use a username and password. 多因素身份验证使攻击者难以使用用户名和密码。
    - However, some second factors like SMS codes are relatively easy to get around然而，一些次要因素，如短信代码，相对容易绕过

. Daily Backups数据备份
- Vulnerability
    - Access to files and information stored on a disk because of:存取存储在磁盘上的文件和信息，因为:
    - Disk failure硬盘故障 
    - Lost device设备丢失
    - Ransomware or deletion勒索软件或删除
- Control
    - Daily backup每日备份
    - Cloud storage云存储
- Issues
    - Problems with how frequently you backup 备份频率的问题
    - Overheads of backups: storage, network use备份开销:存储、网络使用
    - Time to restore恢复时间
    - Backup confidentiality, integrity and availability备份的机密性、完整性和可用性
  
. Patching Applications and Operating System修补应用程序和操作系统
- A patch is a small update to application and operating system software that usually fixes bugs rather than introduces major features (referred to as an upgrade)补丁是应用程序和操作系统软件的小更新，通常修复错误，而不是引入主要功能(称为升级)。
- Vulnerability
    - Known vulnerabilities in software can be exploited by attackers软件的已知漏洞可被攻击者利用
    - Issuing a patch tells attackers about vulnerabilities发布补丁会告诉攻击者漏洞
- Control
    - Update applications and operating system with patches as soon as they are available尽快更新应用程序和操作系统的补丁
- Issues
    - Patches are often complicated and can impact the availability of systems themselves补丁通常很复杂，可能会影响系统本身的可用性
    - Issuing a patch informs attackers about vulnerabilities and increases the attacks发布补丁通知攻击者有关漏洞并增加攻击
    - User fatigue in constantly updating their systems 用户对不断更新系统感到疲劳
  
. Application Hardening
- Vulnerability
    - Many applications come with features and default settings that are insecure许多应用程序带有不安全的功能和默认设置
    - Default passwords that are the same for each product不同产品的默认密码相同
    - Examples are IoT devices, Routers, server software—例如物联网设备、路由器、服务器软件
- Control
    - Harden application by removing default features and settings, setting new passwords通过删除默认功能和设置，设置新密码来加固应用程序
  
. Anti-Malware Software
- Anti-Malware software (AKA Anti-Virus) can be installed at endpoints (computers, mobile devices, tablets) or on edge devices like routers反恶意软件(又名反病毒)可以安装在端点(计算机、移动设备、平板电脑)或边缘设备(如路由器)上
- Works in real-time scanning network traffic, scan file changes and can do disk scans能实时扫描网络流量，扫描文件变化并能做磁盘扫描
- Works by looking for a range of indicators such as file signatures based on file hashes, presence of certain strings (text), use of system functionality that is not normal for applications通过查找一系列指标来工作，例如基于文件哈希的文件签名，某些字符串(文本)的存在，不正常应用程序的系统功能的使用
- More recently anti-malware operates on behavioural analysis (anomaly-based): behaviour typical of malware, unexpected network traffic, attempts to change memory or other applications最近反恶意软件操作行为分析(基于异常):恶意软件的典型行为，意外的网络流量，试图改变内存或其他应用程序
    - This is increasingly done using machine learning techniques这越来越多地使用机器学习技术来完成
- Software also does other things now like looking for suspicious browsing, blocking websites that are known malware sites软件现在还可以做其他事情，比如查找可疑的浏览，屏蔽已知的恶意网站
- Malware adapted and tries to evade (including anomaly-based software) and even disable anti-malware software恶意软件适应并试图逃避(包括基于异常的软件)，甚至禁用反恶意软件
### Intrusion Detection Systems入侵检测系统
- Intrusion detection system (IDS) can be network-based or host-based入侵检测系统分为基于网络和基于主机两种
- Like anti-malware, uses knowledge-based and behavioural-based approaches to detection像反恶意软件一样，使用基于知识和基于行为的方法进行检测
- Behavioural based approaches take a baseline of network traffic and other factors and looks for changes基于行为的方法采用网络流量和其他因素的基线，并寻找变化
- IDS systems report back to a Security Information and Event Manager (SIEM) which can alert security staff of issuesIDS系统向安全信息和事件管理器(SIEM)报告，SIEM可以向安全人员发出问题警报
- IDS may take some active measure such as blocking traffic on finding an anomalyIDS可能会在发现异常时采取一些主动措施，例如阻塞流量
### Intrusion Protection Systems入侵保护系统
- Intrusion protection system (IPS) is usually placed inline in the network入侵防御系统(IPS)通常在网络中嵌套
- Like IDS, uses knowledge-based and behavioural-based approaches to detection与IDS一样，使用基于知识和基于行为的方法进行检测
- IPS will take active measures to block malicious activity IPS将采取主动措施阻止恶意活动
- Sometimes combined as IDPS有时合并为IDPS
- Open Source example Snort开源示例Snort
### Honeypots蜜罐
- A Honeypot is a system that is put on the network to lure attackers to attack it and not the real network蜜罐是一个放在网络上的系统，用来引诱攻击者攻击它，而不是真正的网络
- The honeypot is often isolated from any other network meaning that the attackers spend time trying to escape蜜罐通常与任何其他网络隔离，这意味着攻击者要花时间试图逃脱
- Can be sophisticated and replicate multiple machines, services and users可以复杂和复制多个机器，服务和用户
- Monitors attempts at probing and attacking监测探测和攻击的企图
- Gives a geographical picture of where attacks are originating from提供攻击源自何处的地理情况
### Data Loss Prevention (DLP)数据丢失防护
- Systems that try and prevent data from being exfiltrated from an organisation试图防止数据从组织中泄露的系统
- Monitor amount of encrypted data being sent out of an organisation监控从组织发送出去的加密数据量
- Watermark documents and check if they are being sent out of the organisation在文件上加水印，并检查文件是否被发送到组织外
- Monitor email from users and warn them if they are about to violate a policy by sending data out of the organisation监控来自用户的电子邮件，并警告他们，如果他们将数据发送到组织外违反政策
- Theorized that DLP would have detected the exfiltration of 25 GB of emails and documents from Sony Pictures when they were hacked in 2014理论上说，2014年索尼影业被黑客入侵时，DLP会检测到25gb的电子邮件和文件被泄露

### DVWA (Damn Vulnerable Web Application)易受攻击的Web应用
- Popular Web Attacks
    - SQLi (SQL injection)
    - Command Injection
    - XSS (Cross Site Scripting)

### Q&A
1. What is SQLi?
   - SQL is Structured Query Language used to manage relational databases.SQL是用于管理关系数据库的结构化查询语言。
   - SQLi is an attack that targets security vulnerabilities in web applications that use SQL-based databases. SQLi allows an attacker to inject malicious SQL code into a vulnerable web application, which can break the CIA triad.SQLi是一种针对使用基于sql的数据库的web应用程序中的安全漏洞的攻击。SQL允许攻击者将恶意SQL代码注入易受攻击的web应用程序，这可以破坏CIA的三元组

2. How does SQLi occur?SQLi是如何发生的?
    - A malicious user injects some malicious SQL code into a web application.恶意用户在web应用程序中注入恶意SQL代码
    - The application implements a vulnerable logic that uses the code to interact with an SQL database该应用程序实现了一个易受攻击的逻辑，该逻辑使用代码与SQL数据库进行交互
3. How dangerous is SQLi?
    - e.g., data theft; unauthorized access (data modification). 数据盗窃;未经授权的访问(数据修改)。
4. How to mitigate SQLi?如何减轻SQLi
    - e.g., input sanitisation; SQL DB encryption输入封锁;SQL数据库加密

5. What is command injection?什么是命令注入?
It is an attack that allows a malicious user to inject crafted shell commands into vulnerable web applications. These commands are then executed by the applications to break the CIA triad.这是一种允许恶意用户将精心制作的shell命令注入易受攻击的web应用程序的攻击。这些命令然后由应用程序执行，以打破CIA黑社会。
6. How does command injection occur?命令注入是如何发生的?
    - A user injects some malicious shell commands into a web application.用户在web应用程序中注入恶意shell命令。处理步骤
    - The application implements a vulnerable logic that executes the commands.应用程序执行命令的逻辑存在漏洞。
7. How to prevent command injection?如何防止命令注入?
    - e.g., input sanitisation (removing semicolons); avoiding user shell commands 输入清理(删除分号);避免使用用户shell命令
8. How to detect command injection?如何检测命令注入?
    - e.g., detecting unexpected outputs; detecting unusual system activities检测意外输出;检测异常系统活动  
9. What is XSS?
   - XSS allows an attacker to inject malicious scripts into a vulnerable web page that is viewed by other users, e.g., triggering users into opening a phishing website.XSS允许攻击者将恶意脚本注入其他用户查看的易受攻击的网页，例如触发用户打开网络钓鱼网站
   - XSS types: DOM XSS, Stored XSS, Reflected XSS. 类型:DOM XSS，存储XSS，反射XSS
10. How does reflected XSS occur?反射的XSS是如何发生的?
    - An attacker crafts a URL with malicious script code included.攻击者制作包含恶意脚本代码的URL。
    - The user's browser is tricked into sending the crafted URL to the web application.用户的浏览器被欺骗，将精心制作的URL发送到web应用程序。
    - The application implements a vulnerable logic that displays the malicious input back to the user. 应用程序实现了一个易受攻击的逻辑，将恶意输入显示给用户。
    - The user's browser receives the response and executes the script within the context of the vulnerable web application.用户的浏览器接收响应并在易受攻击的web应用程序的上下文中执行脚本。
11. How to mitigate XSS?
    - e.g., input sanitisation; security headers输入封锁;安全标头
    - disabling the XSS protection built into modern browsers.禁用内置在现代浏览器中的XSS保护。













